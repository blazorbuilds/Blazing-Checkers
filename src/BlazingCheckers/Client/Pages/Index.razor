@page "/"
@using Microsoft.AspNetCore.Authorization
@attribute [Authorize]
@inject GamesViewModel ViewModel

<h1>Games</h1>
<button class="btn btn-success">Create Game</button>

@if (ViewModel.Games == null)
{
    <p>Loading games...</p>
}
else if (!ViewModel.Games.Any())
{
    <p>You currently have 0 active games.</p>
}
else
{
    <ul>
        @foreach (var game in ViewModel.Games)
        {
            <li><a href="games/@game.Id">Game @game.Id</a></li>
        }
    </ul>
}

@code
{
    protected override async Task OnInitializedAsync()
    {
        await ViewModel.Initialize();
    }
}